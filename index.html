<!DOCTYPE html>
<html>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <!-- we import arjs version without NFT but with marker + location-based support -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <body style="margin: 0px; overflow: hidden;">
        <a-scene embedded arjs>
            <a-marker type="pattern" url="https://nightsurfer88.github.io/AR_poster/Assets/marker.patt">
                <!-- Container for video and play button -->
                <a-entity position="0 0 0">
                    <!-- Use the a-video component to display an MP4 video -->
                    <a-video
                        position="0 0 0"
                        scale="3.5 2 1"
                        rotation="-90 0 0"
                        src="https://nightsurfer88.github.io/AR_poster/Assets/asset.mp4"
                        id="video"
                        muted
                        autoplay
                    ></a-video>
                    <!-- Play button -->
                    <a-image
                        position="0 0 -1" <!-- Adjust the position as needed -->
                        rotation="90 0 0"
                        scale="0.5 0.5 0.5"
                        src="https://nightsurfer88.github.io/AR_poster/Assets/play-button.png" 
                        id="play-button"
                        visible="false"
                    ></a-image>
                </a-entity>
            </a-marker>
            <a-entity camera></a-entity>
        </a-scene>
        
        <script>
            const videoElement = document.getElementById("video");
            const playButton = document.getElementById("play-button");
            let videoPlaying = false; // Variable to track video playback state
        
            // Listen for marker detection event
            AFRAME.registerComponent("marker-listener", {
                init: function () {
                    const marker = this.el;
                    marker.addEventListener("markerFound", () => {
                        // Show the play button when marker is found and the video is not playing
                        if (!videoPlaying) {
                            playButton.setAttribute("visible", true);
                        }
                    });
                },
            });
        
            // Add a click event listener to the play button
            playButton.addEventListener("click", () => {
                // Check if the video is not playing
                if (!videoPlaying) {
                    // Play the video, hide the play button, and update the videoPlaying state
                    videoElement.play();
                    playButton.setAttribute("visible", false);
                    videoPlaying = true;
                }
            });
        
            // Listen for video play and pause events
            videoElement.addEventListener("play", () => {
                videoPlaying = true;
            });
        
            videoElement.addEventListener("pause", () => {
                videoPlaying = false;
            });
        </script>
    </body>
</html>
